<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/ula-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/u3-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/u3-16.png">
  <link rel="mask-icon" href="/images/ula-logo.svg" color="#222">
  <meta name="google-site-verification" content="kmsBP_VIgMns4zdWHLmwyzlpJUzEcc2S9YAwdOBXWOA">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="fonts.googleapis.com/css?family=Montserrat:300,300italic,400,400italic,700,700italic|Amatic SC:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700|Montserrat:400,400i,700,700i|Noto+Serif+TC:400,500,700&display=swap&subset=chinese-traditional" rel="stylesheet">





<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://ulahsieh.github.io').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="目前的環境使用的 terraform 版本是 v0.13.5  參考以下官網說明，如果從 0.13 版要往最新版 v1 升，需要先升到 0.14。">
<meta property="og:type" content="article">
<meta property="og:title" content="[Terraform] Upgrade to the Latest Version">
<meta property="og:url" content="https://ulahsieh.github.io/terraform-Upgrade.html">
<meta property="og:site_name" content="UlaGraphy">
<meta property="og:description" content="目前的環境使用的 terraform 版本是 v0.13.5  參考以下官網說明，如果從 0.13 版要往最新版 v1 升，需要先升到 0.14。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://imgur.com/QDUkUEk.png">
<meta property="og:image" content="https://imgur.com/Fbo6jfu.png">
<meta property="article:published_time" content="2021-09-14T05:02:00.000Z">
<meta property="article:modified_time" content="2021-09-14T05:35:58.336Z">
<meta property="article:author" content="Ula Hsieh">
<meta property="article:tag" content="terraform">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgur.com/QDUkUEk.png">

<link rel="canonical" href="https://ulahsieh.github.io/terraform-Upgrade.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-float {
  bottom: 88px;
  cursor: pointer;
  left: -8px;
  position: fixed;
  z-index: 9999;
}
#needsharebutton-float .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 4px;
  padding: 0 10px 0 14px;
}
</style>
  <title>[Terraform] Upgrade to the Latest Version | UlaGraphy</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">UlaGraphy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">Get busy living or get busy dying</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://ulahsieh.github.io/terraform-Upgrade.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ula Hsieh">
      <meta itemprop="description" content="Hello! :-) I'm Ula.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="UlaGraphy">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          [Terraform] Upgrade to the Latest Version
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-14 13:02:00" itemprop="dateCreated datePublished" datetime="2021-09-14T13:02:00+08:00">2021-09-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kubernetes/" itemprop="url" rel="index">
                    <span itemprop="name">Kubernetes</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kubernetes/Terraform/" itemprop="url" rel="index">
                    <span itemprop="name">Terraform</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>目前的環境使用的 terraform 版本是 v0.13.5<br>
<img src="https://imgur.com/QDUkUEk.png" alt></p>
<p>參考以下官網說明，如果從 0.13 版要往最新版 v1 升，需要先升到 0.14。</p>
<a id="more"></a>
<table>
<thead>
<tr>
<th>Current Version</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td>v0.10 or earlier</td>
<td>Refer to the upgrade guides for these historical versions until you have upgraded to the latest v0.11 release, then refer to the following item.</td>
</tr>
<tr>
<td>v0.11</td>
<td>Use the terraform 0.12checklist command to detect any situations that must be addressed before upgrading to v0.12, resolve them, and then upgrade to the latest v0.12 release and follow the v0.12 Upgrade Guide.</td>
</tr>
<tr>
<td>v0.12</td>
<td>Upgrade to the latest Terraform v0.13 release and then follow the v0.13 upgrade guide to upgrade your configuration and state for explicit provider requirements.</td>
</tr>
<tr>
<td>v0.13</td>
<td>Upgrade to the latest Terraform v0.14 release and attempt a normal Terraform run. If you encounter any new errors, refer to the v0.14 upgrade guide for resolution steps.</td>
</tr>
<tr>
<td>v0.14</td>
<td>Upgrade directly to the latest Terraform v1.0 release and attempt a normal Terraform run. If you encounter any new errors, refer to the v0.15 upgrade guide for resolution steps.</td>
</tr>
<tr>
<td>v0.15</td>
<td>Upgrade directly to the latest Terraform v1.0 release and attempt a normal Terraform run. Terraform v1.0 is a continuation of the v0.15 series, and so v1.0.0 and later are directly backward-compatible with Terraform v0.15.5.</td>
</tr>
</tbody>
</table>
<h3 id="開始升級">開始升級</h3>
<p>各版 release <a href="https://releases.hashicorp.com/terraform/" target="_blank" rel="external nofollow noopener noreferrer">載點</a>，請依照不同的作業系統安裝。<br>
<img src="https://imgur.com/Fbo6jfu.png" alt></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@master1 ~]<span class="comment"># wget https://releases.hashicorp.com/terraform/0.14.11/terraform_0.14.11_linux_amd64.zip</span></span><br><span class="line">--2021-09-14 13:00:30--  https://releases.hashicorp.com/terraform/0.14.11/terraform_0.14.11_linux_amd64.zip</span><br><span class="line">Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.1.183, 151.101.65.183, 151.101.129.183, ...</span><br><span class="line">Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.1.183|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 33789439 (32M) [application/zip]</span><br><span class="line">Saving to: ‘terraform_0.14.11_linux_amd64.zip’</span><br><span class="line"></span><br><span class="line">100%[==============================================================================================&gt;] 33,789,439  8.05MB/s   <span class="keyword">in</span> 4.0s</span><br><span class="line"></span><br><span class="line">2021-09-14 13:00:34 (8.10 MB/s) - ‘terraform_0.14.11_linux_amd64.zip’ saved [33789439/33789439]</span><br><span class="line"></span><br><span class="line">[root@master1 ~]<span class="comment">#</span></span><br><span class="line">[root@master1 ~]<span class="comment"># unzip terraform_0.14.11_linux_amd64.zip</span></span><br><span class="line">Archive:  terraform_0.14.11_linux_amd64.zip</span><br><span class="line">  inflating: terraform</span><br><span class="line"></span><br><span class="line">[root@master1 ~]<span class="comment">#</span></span><br><span class="line">[root@master1 ~]<span class="comment"># mv terraform /usr/local/bin/</span></span><br><span class="line">mv: overwrite ‘/usr/<span class="built_in">local</span>/bin/terraform’? y</span><br><span class="line">[root@master1 ~]<span class="comment"># terraform version</span></span><br><span class="line">Terraform v0.14.11</span><br><span class="line"></span><br><span class="line">Your version of Terraform is out of date! The latest version</span><br><span class="line">is 1.0.6. You can update by downloading from https://www.terraform.io/downloads.html</span><br><span class="line">[root@master1 ~]<span class="comment">#</span></span><br><span class="line">[root@master1 ~]<span class="comment"># wget https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip</span></span><br><span class="line">[root@master1 ~]<span class="comment"># wget https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip</span></span><br><span class="line">--2021-09-14 13:31:21--  https://releases.hashicorp.com/terraform/1.0.6/terraform_1.0.6_linux_amd64.zip</span><br><span class="line">Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.129.183, 151.101.1.183, 151.101.65.183, ...</span><br><span class="line">Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.129.183|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 32677516 (31M) [application/zip]</span><br><span class="line">Saving to: ‘terraform_1.0.6_linux_amd64.zip’</span><br><span class="line"></span><br><span class="line">100%[=================================================================================================================&gt;] 32,677,516  11.0MB/s   <span class="keyword">in</span> 2.8s</span><br><span class="line"></span><br><span class="line">2021-09-14 13:31:24 (11.0 MB/s) - ‘terraform_1.0.6_linux_amd64.zip’ saved [32677516/32677516]</span><br><span class="line"></span><br><span class="line">[root@master1 ~]<span class="comment">#</span></span><br><span class="line">[root@master1 ~]<span class="comment"># unzip terraform_1.0.6_linux_amd64.zip</span></span><br><span class="line">Archive:  terraform_1.0.6_linux_amd64.zip</span><br><span class="line">  inflating: terraform</span><br><span class="line"></span><br><span class="line">[root@master1 ~]<span class="comment">#</span></span><br><span class="line">[root@master1 ~]<span class="comment"># mv terraform /usr/local/bin/</span></span><br><span class="line">mv: overwrite ‘/usr/<span class="built_in">local</span>/bin/terraform’? y</span><br><span class="line">[root@master1 ~]<span class="comment"># terraform version</span></span><br><span class="line">Terraform v1.0.6</span><br></pre></td></tr></table></figure>
<h3 id="cannot-execute-binary-file">cannot execute binary file</h3>
<p>如果在安裝完後，使用 <code>terrform</code> cli 時，發現以下錯誤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@master1 ~]# terraform version</span><br><span class="line">-bash: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;terraform: cannot execute binary file</span><br></pre></td></tr></table></figure>
<p>則是因為下載到錯誤的作業系統的安裝包。</p>
<h6 id="Reference">Reference</h6>
<ul>
<li><a href="https://www.terraform.io/upgrade-guides/1-0.html" target="_blank" rel="external nofollow noopener noreferrer">https://www.terraform.io/upgrade-guides/1-0.html</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/terraform/" rel="tag"># terraform</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Docker-golang-oracle-instant-client-image.html" rel="prev" title="[Docker] 建立 golang 中使用到 oracle instant client 的 image">
      <i class="fa fa-chevron-left"></i> [Docker] 建立 golang 中使用到 oracle instant client 的 image
    </a></div>
      <div class="post-nav-item">
    <a href="/Kubernetes-Change-MetalLB-IP-Range.html" rel="next" title="[Kubernetes] Change MetalLB IP Range">
      [Kubernetes] Change MetalLB IP Range <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#開始升級"><span class="nav-number">1.</span> <span class="nav-text">開始升級</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cannot-execute-binary-file"><span class="nav-number">2.</span> <span class="nav-text">cannot execute binary file</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Reference"><span class="nav-number">2.0.0.1.</span> <span class="nav-text">Reference</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ula Hsieh" src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Ula Hsieh</p>
  <div class="site-description" itemprop="description">Hello! :-) I'm Ula.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">102</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:yiju.117@gmail.com" title="E-Mail → mailto:yiju.117@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ula Hsieh</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
<div id="needsharebutton-float">
      <span class="btn">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </span>
    </div>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      flOptions = {};
        flOptions.iconStyle = "default";
        flOptions.boxForm = "horizontal";
        flOptions.position = "middleRight";
        flOptions.networks = "Wechat,Twitter,Facebook";
      new needShareButton('#needsharebutton-float', flOptions);
  </script>
<script>
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "https://ulahsieh.github.io/terraform-Upgrade.html",
            identifier: "terraform-Upgrade.html",
            title: "[Terraform] Upgrade to the Latest Version"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://ulagraphy.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>

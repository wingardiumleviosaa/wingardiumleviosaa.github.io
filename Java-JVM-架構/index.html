<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/ula-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/u3-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/u3-16.png">
  <link rel="mask-icon" href="/images/ula-logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,300italic,400,400italic,700,700italic%7CAmatic+SC:300,300italic,400,400italic,700,700italic%7CSource+Code+Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link href="https://fonts.googleapis.com/css?family=Noto+Serif+TC:400,500,700&display=swap&subset=chinese-traditional" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ulahsieh.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12},"copycode":"ture","bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="å‰ä¸€ç¯‡ä»‹ç´¹åˆ° Java ç¨‹å¼ç¶“éç·¨è­¯å¾Œæœƒç”¢ç”Ÿ .class æª” (bytecode)ï¼Œåªèƒ½é‹è¡Œåœ¨ JVM ä¸Šï¼Œè€Œ JVM åœ¨é‹ç®—æ™‚ï¼Œå¦‚åŒé›»è…¦éœ€è¦è¨˜æ†¶é«”å„²å­˜é‹ç®—æ‰€éœ€çš„å„ç¨®è³‡æ–™åŠæŒ‡ä»¤ï¼Œé€™ç¯‡æ–‡ç« å°‡ç´€éŒ„ JVM çš„æ¶æ§‹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="[Java] JVM æ¶æ§‹">
<meta property="og:url" content="https://ulahsieh.github.io/Java-JVM-%E6%9E%B6%E6%A7%8B/">
<meta property="og:site_name" content="Wingardium Leviosa">
<meta property="og:description" content="å‰ä¸€ç¯‡ä»‹ç´¹åˆ° Java ç¨‹å¼ç¶“éç·¨è­¯å¾Œæœƒç”¢ç”Ÿ .class æª” (bytecode)ï¼Œåªèƒ½é‹è¡Œåœ¨ JVM ä¸Šï¼Œè€Œ JVM åœ¨é‹ç®—æ™‚ï¼Œå¦‚åŒé›»è…¦éœ€è¦è¨˜æ†¶é«”å„²å­˜é‹ç®—æ‰€éœ€çš„å„ç¨®è³‡æ–™åŠæŒ‡ä»¤ï¼Œé€™ç¯‡æ–‡ç« å°‡ç´€éŒ„ JVM çš„æ¶æ§‹ã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://imgur.com/qbAYLHV.png">
<meta property="og:image" content="https://imgur.com/H8aD6Eh.png">
<meta property="og:image" content="https://imgur.com/iMbW3Un.png">
<meta property="og:image" content="https://imgur.com/ZumQcTh.png">
<meta property="og:image" content="https://imgur.com/WDOImGT.png">
<meta property="og:image" content="https://imgur.com/GT53vZO.png">
<meta property="og:image" content="https://imgur.com/AsMKt4b.png">
<meta property="og:image" content="https://imgur.com/oturBUp.png">
<meta property="og:image" content="https://imgur.com/AsMKt4b.png">
<meta property="og:image" content="https://imgur.com/AoP8OjJ.png">
<meta property="article:published_time" content="2020-07-01T08:41:00.000Z">
<meta property="article:modified_time" content="2020-07-01T08:41:00.000Z">
<meta property="article:author" content="Ula">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JRE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgur.com/qbAYLHV.png">


<link rel="canonical" href="https://ulahsieh.github.io/Java-JVM-%E6%9E%B6%E6%A7%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://ulahsieh.github.io/Java-JVM-%E6%9E%B6%E6%A7%8B/","path":"Java-JVM-æ¶æ§‹/","title":"[Java] JVM æ¶æ§‹"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[Java] JVM æ¶æ§‹ | Wingardium Leviosa</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Wingardium Leviosa</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Memory Leak</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JVM-Structure"><span class="nav-number">1.</span> <span class="nav-text">JVM Structure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-Loader"><span class="nav-number">1.1.</span> <span class="nav-text">Class Loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Execution-Engine"><span class="nav-number">1.2.</span> <span class="nav-text">Execution Engine</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Runtime-Data-Areas"><span class="nav-number">1.3.</span> <span class="nav-text">Runtime Data Areas</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PC-Register"><span class="nav-number">1.3.1.</span> <span class="nav-text">PC Register</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JVM-Stack"><span class="nav-number">1.3.2.</span> <span class="nav-text">JVM Stack</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E8%AE%8A%E9%87%8F%E8%A1%A8-Local-Variable-Array"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">å±€éƒ¨è®Šé‡è¡¨ (Local Variable Array)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%81%8B%E7%AE%97%E5%85%83%E6%A3%A7-Operand-Stack"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">é‹ç®—å…ƒæ£§ (Operand Stack)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8B%95%E6%85%8B%E9%80%A3%E6%8E%A5-Dynamic-Linking"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">å‹•æ…‹é€£æ¥ (Dynamic Linking)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Native-Method-Stack"><span class="nav-number">1.3.3.</span> <span class="nav-text">Native Method Stack</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Heap"><span class="nav-number">1.3.4.</span> <span class="nav-text">Heap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A0%86%E8%A8%98%E6%86%B6%E9%AB%94%E5%88%86%E9%85%8D"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">å †è¨˜æ†¶é«”åˆ†é…</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Garbage-Collection"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">Garbage Collection</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#heap-%E5%A4%A7%E5%B0%8F%E5%B0%8D-GC-%E7%9A%84%E5%BD%B1%E9%9F%BF"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">heap å¤§å°å° GC çš„å½±éŸ¿</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MetaSpace-Java8-%E4%BB%A5%E5%89%8D%E4%BB%A5%E5%BE%8C"><span class="nav-number">1.3.5.</span> <span class="nav-text">MetaSpace (Java8 ä»¥å‰ä»¥å¾Œ)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Reference"><span class="nav-number">1.3.5.0.1.</span> <span class="nav-text">Reference</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ula" src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Ula</p>
  <div class="site-description" itemprop="description">Hello! :-)</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">121</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">121</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://ulahsieh.github.io/Java-JVM-%E6%9E%B6%E6%A7%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ula">
      <meta itemprop="description" content="Hello! :-)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wingardium Leviosa">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Java] JVM æ¶æ§‹
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-07-01 16:41:00" itemprop="dateCreated datePublished" datetime="2020-07-01T16:41:00+08:00">2020-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>å‰ä¸€ç¯‡ä»‹ç´¹åˆ° Java ç¨‹å¼ç¶“éç·¨è­¯å¾Œæœƒç”¢ç”Ÿ .class æª” (bytecode)ï¼Œåªèƒ½é‹è¡Œåœ¨ JVM ä¸Šï¼Œè€Œ JVM åœ¨é‹ç®—æ™‚ï¼Œå¦‚åŒé›»è…¦éœ€è¦è¨˜æ†¶é«”å„²å­˜é‹ç®—æ‰€éœ€çš„å„ç¨®è³‡æ–™åŠæŒ‡ä»¤ï¼Œé€™ç¯‡æ–‡ç« å°‡ç´€éŒ„ JVM çš„æ¶æ§‹ã€‚</p>
<span id="more"></span>
<h2 id="JVM-Structure">JVM Structure</h2>
<p><img src="https://imgur.com/qbAYLHV.png" alt> [1]<br>
ä¸Šåœ–ç‚º JVM åŸ·è¡Œä¸€å€‹ Java ç¨‹å¼çš„éç¨‹ï¼š</p>
<h3 id="Class-Loader">Class Loader</h3>
<p>ç”¨æ–¼å°‡ç·¨è­¯å¥½çš„ <code>.class</code> æ–‡ä»¶ ï¼ <strong>Java Bytecode</strong> åŠ è¼‰åˆ° Runtime Data Areasã€‚</p>
<h3 id="Execution-Engine">Execution Engine</h3>
<p>ç”¨æ–¼åŸ·è¡Œ Java Bytecode æˆ–æ˜¯ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://baike.baidu.com/item/Native%20methods">native method</a>.</p>
<p>Java Bytecode æ˜¯ä»¥äººé¡ä»ç„¶å¯ä»¥ç†è§£çš„èªè¨€è€Œä¸æ˜¯æ©Ÿå™¨èªè¨€ç·¨å¯«çš„ã€‚å› æ­¤ï¼ŒExecution Engine é€éä»¥ä¸‹å…©ç¨®æ–¹å¼å°‡å­—ç¯€ç¢¼è½‰ç‚º JVM ä¸­çš„æ©Ÿå™¨èªè¨€ã€‚</p>
<ol>
<li>Interpreter</li>
<li>JIT (Just-In-Time) Compiler</li>
</ol>
<table><tr><td bgcolor="#FAFAFA">
<b>ä»€éº¼æ™‚å€™ç”¨ Interpreter ä»€éº¼æ™‚å€™ç”¨ Compiler?</b><br>
The application code is initially interpreted, but the JVM monitors which part of bytecode are frequently executed and translates them to machine code for direct execution on the hardware. 
For bytecode which is executed only a few times, interpret it will saves the compilation time and reduces the initial latency; 
For frequently executed bytecode, JIT compilation will be used after an initial phase of slow interpretation. 
By interpreting the initial code, execution statistics can be collected before compilation, which helps to perform better optimization.[3]
</td></tr></table>
<p><img src="https://imgur.com/H8aD6Eh.png" alt> [2]<br>
<img src="https://imgur.com/iMbW3Un.png" alt> [3]</p>
<h3 id="Runtime-Data-Areas">Runtime Data Areas</h3>
<p>JVM é‹è¡Œæ™‚æ‰€éœ€çš„çš„è¨˜æ†¶é«”å€å¡Šï¼Œç¸½å…±å¯ä»¥åˆ†ç‚ºå…­å€</p>
<ul>
<li>PC Register, JVM Stack ä»¥åŠ Native Method Stack ä¾è³´æ–¼<strong>å–®å€‹</strong>åŸ·è¡Œç·’çš„å•Ÿå‹•/çµæŸä¾†å»ºç«‹èˆ‡éŠ·æ¯€ã€‚</li>
<li>Heap, Metaspace(Metod Area &amp; Runtime Constant Pool) æ˜¯éš¨è‘—JVMçš„å•Ÿå‹•è€Œå­˜åœ¨ï¼Œç‚º<strong>å…¨éƒ¨</strong>çš„åŸ·è¡Œç·’å…±äº«ã€‚</li>
</ul>
<p><img src="https://imgur.com/ZumQcTh.png" alt> [4]</p>
<h4 id="PC-Register">PC Register</h4>
<p>Program Counter Registerï¼Œç´€éŒ„ç•¶å‰åŸ·è¡Œç·’æ‰€åŸ·è¡Œåˆ°çš„ bytecode ä¸­çš„æŒ‡ä»¤ä½å€ã€‚ç‚ºäº†åŸ·è¡Œç·’åˆ‡æ›å¾Œèƒ½æ¢å¾©åˆ°æ­£ç¢ºçš„åŸ·è¡Œä½ç½®ï¼Œæ¯æ¢åŸ·è¡Œç·’éƒ½éœ€è¦æœ‰ä¸€å€‹ç¨ç«‹çš„ program counterï¼Œå„åŸ·è¡Œç·’ä¹‹é–“ç¨ç«‹å„²å­˜ã€‚</p>
<h4 id="JVM-Stack">JVM Stack</h4>
<p>ç”¨ä¾†æ”¾ frameï¼Œæ¯å€‹ method åœ¨åŸ·è¡Œçš„åŒæ™‚éƒ½æœƒå»ºç«‹ä¸€å€‹ stack frameï¼Œç”¨æ–¼å„²å­˜å±€éƒ¨è®Šæ•¸è¡¨ (Local Variable Array)ã€é‹ç®—å…ƒå †ç–Š (Operand Stack) å’Œå‹•æ…‹é€£æ¥ (Dynamic Linking) ä»¥åŠè¿”å›å€¼(Return Value)ã€‚æ¯å€‹ method å¾å‘¼å«ç›´è‡³çµæŸ (return)ï¼Œéƒ½å°æ‡‰è‘—ä¸€å€‹ stack frame åœ¨æ­¤å€å¡Šä¸­å…¥/å‡º (push/pop) stack çš„éç¨‹ã€‚<br>
JVM Statck çš„å¤§å°å¯ä»¥æ˜¯å›ºå®šçš„ï¼Œæˆ–æ˜¯å‹•æ…‹æ“´å±•çš„ã€‚å¦‚æœ thread éœ€è¦ä¸€å€‹æ¯”å›ºå®šå¤§å°å¤§çš„Stackï¼Œæœƒç™¼ç”Ÿ <strong>StackOverflowError</strong>ï¼›å¦‚æœå‹•æ…‹æ“´å±• Stack æ™‚æ²’æœ‰è¶³å¤ çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œå‰‡æœƒç™¼ç”Ÿ <strong>OutOfMemoryError</strong>ã€‚<br>
<img src="https://imgur.com/WDOImGT.png" alt><br>
<img src="https://imgur.com/GT53vZO.png" alt><br>
[5]</p>
<h5 id="å±€éƒ¨è®Šé‡è¡¨-Local-Variable-Array">å±€éƒ¨è®Šé‡è¡¨ (Local Variable Array)</h5>
<p>å±€éƒ¨è®Šé‡è¡¨ç”¨æ–¼å­˜æ”¾æ–¹æ³•åƒæ•¸å’Œæ–¹æ³•å…§éƒ¨å®šç¾©çš„å±€éƒ¨è®Šé‡ï¼Œå…¶å¤§å°åœ¨ç·¨è­¯æœŸ(.class å‰)å°±è¢«ç¢ºå®šã€‚<br>
Java ä»£ç¢¼ <code>int a=0; int b=1; int c=2;</code> å°æ‡‰çš„å±€éƒ¨è®Šé‡è¡¨å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Start</th>
<th>Length</th>
<th>Slot</th>
<th>Name</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>12</td>
<td>0</td>
<td>a</td>
<td>I</td>
</tr>
<tr>
<td>4</td>
<td>10</td>
<td>1</td>
<td>b</td>
<td>I</td>
</tr>
<tr>
<td>6</td>
<td>8</td>
<td>2</td>
<td>c</td>
<td>I</td>
</tr>
</tbody>
</table>
<ul>
<li>Start: è®Šé‡åç§»é‡ã€‚</li>
<li>Length: ä½œç”¨åŸŸç¯„åœé•·åº¦ã€‚ <code>Start,Start+Length</code> å°±æ˜¯è©²è®Šé‡çš„ä½œç”¨åŸŸã€‚</li>
<li>Slot: è®Šé‡æ§½ï¼Œä¸€å€‹ Slot (ä¸€è¡Œ) èƒ½å­˜å„² 32bit çš„ primitive typeã€reference typeã€returnAddress æ•¸æ“šï¼Œlong/dobule å‰‡éœ€è¦å…©å€‹ Slotã€‚</li>
</ul>
<h5 id="é‹ç®—å…ƒæ£§-Operand-Stack">é‹ç®—å…ƒæ£§ (Operand Stack)</h5>
<p>ç”¨ push,pop æ“ä½œæ•¸æ“šã€‚operand stack åªæ˜¯ä¸€å€‹è‡¨æ™‚çš„è¨ˆç®—éç¨‹ï¼Œè¦ç”¨åˆ° Local variable table è£¡é¢çš„å€¼ï¼Œç„¶å¾Œå¾—å‡ºçµæœï¼Œæ”¾å…¥åˆ°Â local variables å€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Java ä»£ç¢¼</span></span><br><span class="line"><span class="keyword">int</span> a=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> b=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> c=a+b;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// é‹ç®—å…ƒæ£§</span><br><span class="line">0: iconst_1 // push 1åˆ°æ“ä½œæ£§ã€‚å¤§æ–¼5çš„intå€¼æœƒç”¨åˆ° bipush &lt;i&gt; æŒ‡ä»¤ã€‚</span><br><span class="line">1: istore_0 // pop é ‚å…ƒç´ ï¼Œå­˜å„²åˆ°index=0çš„æœ¬åœ°è®Šé‡ã€‚</span><br><span class="line">2: iconst_2 // push 2 åˆ°æ“ä½œæ£§</span><br><span class="line">3: istore_1 // popæ£§é ‚å…ƒç´ ï¼Œå­˜å„²åˆ°index=1çš„æœ¬åœ°è®Šé‡ã€‚</span><br><span class="line">4: iload_0 // æŠŠindex=0çš„æœ¬åœ°è®Šé‡åŠ è¼‰åˆ°æ£§é ‚</span><br><span class="line">5: iload_1 // æŠŠindex=1çš„æœ¬åœ°è®Šé‡åŠ è¼‰åˆ°æ£§é ‚</span><br><span class="line">6: iadd // æŠŠæ£§é ‚å…©å€‹æ•¸popå‡ºä¾†ç›¸åŠ ï¼Œä¸¦æŠŠçµæœå­˜æ”¾åˆ°æ£§é ‚</span><br><span class="line">7: istore_2 // çµæœå­˜å„²åˆ°index=2çš„æœ¬åœ°è®Šé‡</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="å‹•æ…‹é€£æ¥-Dynamic-Linking">å‹•æ…‹é€£æ¥ (Dynamic Linking)</h5>
<p>æŒ‡ç¬¦è™Ÿå¼•ç”¨ï¼ˆSymbolic Referencesï¼‰è½‰æ›æˆç‚ºç›´æ¥å¼•ç”¨ï¼ˆDirect Referencesï¼‰çš„éç¨‹ã€‚æ¯å€‹ Frame å…§éƒ¨éƒ½åŒ…å«ä¸€å€‹æŒ‡å‘ runtime constant pool çš„å¼•ç”¨ä¾†æ”¯æ´ç•¶å‰æ–¹æ³•çš„ç¨‹å¼ç¢¼ã€‚</p>
<ul>
<li>ç¬¦è™Ÿå¼•ç”¨ï¼šä»¥ä¸€çµ„ç¬¦è™Ÿä¾†æè¿°æ‰€å¼•ç”¨çš„ç›®æ¨™ï¼Œç¬¦è™Ÿå¯ä»¥æ˜¯ä»»ä½•å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦ä½¿ç”¨æ™‚èƒ½ç„¡æ­§ç¾©åœ°å®šä½åˆ°ç›®æ¨™å³å¯ã€‚æ–¹æ³•åï¼Œé¡åï¼Œå­—æ®µåéƒ½æ˜¯ç¬¦è™Ÿå¼•ç”¨ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>; <span class="comment">//æŠŠæ•´æ•¸ 1 è³¦å€¼çµ¦ int å‹è®Šé‡ iï¼Œæ•´æ•¸ 1 å°±æ˜¯å­—é¢é‡ï¼Œ</span></span><br><span class="line">String s = <span class="string">&quot;abc&quot;</span>; <span class="comment">//abc æ˜¯å­—é¢é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç›´æ¥å¼•ç”¨ï¼šå¯ä»¥æ˜¯ç›´æ¥æŒ‡å‘ç›®æ¨™çš„æŒ‡é‡ã€ç›¸å°åç§»é‡æˆ–æ˜¯ä¸€å€‹èƒ½é–“æ¥å®šä½åˆ°ç›®æ¨™çš„å¥æŸ„ã€‚å¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆå¼•ç”¨çš„ç›®æ¨™ä¸€å®šæ˜¯å·²ç¶“å­˜åœ¨æ–¼å…§å­˜ä¸­ã€‚</li>
</ul>
<h4 id="Native-Method-Stack">Native Method Stack</h4>
<p>æ­¤å€å¡Šä¸»è¦åŸ·è¡Œnative methodã€‚</p>
<h4 id="Heap">Heap</h4>
<p>ç”¨æ–¼å„²å­˜ç‰©ä»¶çš„å¯¦ä¾‹(object instance)å’Œé™£åˆ—ï¼Œä¹Ÿæ˜¯ GC ç®¡ç†çš„ä¸»è¦å€åŸŸï¼Œå› æ­¤ä¹Ÿè¢«ç¨±ç‚º GC å † â€” Garbage Collected Heapã€‚Heap æ˜¯åœ¨ JVM å•Ÿå‹•æ™‚å»ºç«‹çš„ï¼Œç‚ºæ‰€æœ‰åŸ·è¡Œç·’å…±æœ‰ã€‚å †çš„å¤§å°å¯ä»¥å›ºå®šï¼Œä¹Ÿå¯ä»¥æ“´å¤§ç¸®å°ä¸”ä¸éœ€è¦æ˜¯é€£çºŒç©ºé–“ã€‚</p>
<h5 id="å †è¨˜æ†¶é«”åˆ†é…">å †è¨˜æ†¶é«”åˆ†é…</h5>
<p>ç¾åœ¨çš„ GC éƒ½æ¡ generation-collect åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥ Heap è¨˜æ†¶é«”å¯åŠƒåˆ†ç‚ºï¼š<br>
<img src="https://imgur.com/AsMKt4b.png" alt> [6]</p>
<ul>
<li>Young Generationï¼ˆå¹´è¼•ä»£ï¼‰</li>
<li>Old Generationï¼ˆè€å¹´ä»£ï¼‰<br>
å…¶ä¸­Young generationå¯ä»¥é€²ä¸€æ­¥åˆ†ç‚º3å€‹å€å¡Š: Eden spaceï¼Œ Survivor 1 å’Œ Survivor 2</li>
</ul>
<h5 id="Garbage-Collection">Garbage Collection</h5>
<p>åƒåœ¾å›æ”¶(garbage collection)æ˜¯æŒ‡å°‡ä½”è¨˜æ†¶é«”ç©ºé–“(heap)çš„ä¸å†è¢«åƒè€ƒçš„ç‰©ä»¶<br>
æ¸…é™¤çš„éç¨‹ã€‚</p>
<p>å¹´è¼•ä»£å›æ”¶ï¼šåˆç¨±å°å‹å›æ”¶ (minor collection)ï¼ŒåŸ·è¡Œæ™‚æ©Ÿæ˜¯ç•¶å¹´è¼•ä»£çš„ç©ºé–“æ»¿çš„æ™‚å€™æœƒè§¸ç™¼ã€‚ç•¶æ–°ç‰©ä»¶ç”¢ç”Ÿæ™‚æœƒæ”¾ç½®åœ¨ Eden spaceï¼Œç•¶ Eden space æ»¿äº†ï¼ŒJVM æœƒå•Ÿå‹• Minor GCï¼ŒæŠŠå­˜æ´»çš„ç‰©ä»¶å¾€ Survivor 1 æˆ– 2 ç§»åŠä»¥åŸæœ¬åœ¨ Survivor 1 æˆ– 2 çš„å­˜æ´»ç‰©ä»¶å¾€å¦ä¸€å€‹ Survivor ç©ºé–“ç§»ã€‚ç•¶ JVM åŸ·è¡Œå¤šæ¬¡ Minor GC å¾Œï¼ŒæœƒæŠŠç¬¦åˆæ¢ä»¶çš„å­˜æ´»ç‰©ä»¶å¾€ Tenured generation ç§»ï¼Œé€™å€‹éç¨‹æˆ‘å€‘ç¨±ç‚ºMinor GCã€‚</p>
<p>è€å¹´ä»£æˆ–æ°¸ä¹…ä»£å›æ”¶ç¨±ç‚ºå®Œæ•´å›æ”¶(full collection)æˆ–ä¸»è¦å›æ”¶(major collection)ã€‚ç•¶ old generation æ»¿äº†æ™‚ï¼ŒJVM æœƒå›æ”¶ Tenured generation çš„ç©ºé–“ï¼Œç¨±ç‚º Major/Full GCã€‚</p>
<h5 id="heap-å¤§å°å°-GC-çš„å½±éŸ¿">heap å¤§å°å° GC çš„å½±éŸ¿</h5>
<p>ç©ºé–“æ¯”è¼ƒå°çš„æ™‚å€™ï¼Œæ‰“æƒå‹•ä½œæ¯”è¼ƒå¿«ï¼Œä½†æ˜¯ç›¸å°åƒåœ¾ç´¯ç©ä¹Ÿæ¯”è¼ƒå¿«æ»¿ï¼Œæ‰€ä»¥æ‰“æƒéœ€è¦æ¯”è¼ƒé »ç¹ã€‚ç›¸ååœ°ï¼Œç©ºé–“å¤§ï¼Œéœ€è¦æ‰“æƒçš„é »ç‡æ¯”è¼ƒä½ï¼Œä½†æ˜¯ä¸€æ‰“æƒèµ·ä¾†å°±å¾ˆè²»æ™‚ã€‚é€šå¸¸å°±æ˜¯åœ¨ã€Œæ™‚é–“ã€ã€ã€Œç©ºé–“ã€ã€ã€Œé »ç‡ã€ä¸‰è€…ä¹‹é–“ä½œå–æ¨è€Œå·²ã€‚<br>
Minor GC å’Œ Major/Fulléƒ½æ˜¯ â€œStop the Worldâ€ äº‹ä»¶ï¼Œåªæ˜¯ Minor GC æ™‚é–“éå¸¸çŸ­(å¹¾ç™¾milli-seconds)ï¼Œä½¿ç”¨è€…è¼ƒä¸å®¹æ˜“å¯Ÿè¦º;è€Œ Full GC æ™‚é–“ç›¸å°ä¸Šé•·å¾ˆå¤šï¼Œä¸” heap size æ„ˆå¤§æ™‚é–“æ„ˆä¹…ï¼›å› æ­¤æ‡‰å„˜é‡é¿å…æˆ–æ¸›å°‘ Full GC ç™¼ç”Ÿã€‚</p>
<p>è‹¥Heap spaceæ²’ç©ºé–“å­˜æ”¾æ–°å»ºç«‹çš„ç‰©ä½œï¼Œå‰‡JVMæœƒä¸Ÿå‡ºOutOfMemoryErroræˆ– java.lang.OutOfMemoryError heap space</p>
<h4 id="MetaSpace-Java8-ä»¥å‰ä»¥å¾Œ">MetaSpace (Java8 ä»¥å‰ä»¥å¾Œ)</h4>
<p><strong>Java 7</strong><br>
<img src="https://imgur.com/oturBUp.png" alt><br>
<strong>Java 8</strong><br>
<img src="https://imgur.com/AsMKt4b.png" alt>[6]<br>
ä¸‹é¢é€™å¼µèƒ½æ›´æ¸…æ¥š java 8 çš„æ”¹è®Š:<br>
<img src="https://imgur.com/AoP8OjJ.png" alt>[7]<br>
åŸå…ˆå­˜åœ¨ heap ç”¨ä¾†å­˜æ”¾å­˜æ”¾ byte code, JIT information, class metadata ä»¥åŠ static çš„è®Šæ•¸, æ–¹æ³•çš„æ°¸ä¹…ä»£ PermGen è¢«ç§»åˆ° native memory çš„ metaspace äº†ã€‚</p>
<h6 id="Reference">Reference</h6>
<p>[1]<a target="_blank" rel="external nofollow noopener noreferrer" href="http://mauryasunil007.blogspot.com/2016/04/understanding-jvm-internal-architecture.html">http://mauryasunil007.blogspot.com/2016/04/understanding-jvm-internal-architecture.html</a><br>
[2]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.datawareventures.com/single-post/2015/10/09/Field-Specialization-Just-another-JIT">https://www.datawareventures.com/single-post/2015/10/09/Field-Specialization-Just-another-JIT</a><br>
[3]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/1326071/is-java-a-compiled-or-an-interpreted-programming-language">https://stackoverflow.com/questions/1326071/is-java-a-compiled-or-an-interpreted-programming-language</a><br>
[4]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://blog.jamesdbloom.com/JVMInternals.html">https://blog.jamesdbloom.com/JVMInternals.html</a><br>
[5]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://alvinalexander.com/scala/fp-book/recursion-jvm-stacks-stack-frames/">https://alvinalexander.com/scala/fp-book/recursion-jvm-stacks-stack-frames/</a><br>
[6]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.deistercloud.com/content/Axional%20development%20libraries.20/Axional%20Server.4/Tunning.xml?embedded=true">https://docs.deistercloud.com/content/Axional development libraries.20/Axional Server.4/Tunning.xml?embedded=true</a><br>
[7]<a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/39675406/difference-between-metaspace-and-native-memory-in-java">https://stackoverflow.com/questions/39675406/difference-between-metaspace-and-native-memory-in-java</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/JRE/" rel="tag"># JRE</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Java-what-are-JDK-JRE-JDK/" rel="prev" title="[Java] What are JDK, JRE, JDK ?">
                  <i class="fa fa-chevron-left"></i> [Java] What are JDK, JRE, JDK ?
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Install-Java-on-Win10/" rel="next" title="[Java] Install Java on Win10">
                  [Java] Install Java on Win10 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-magnet"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ula</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script>
  function addDarkmodeWidget() {
    const options = {
      bottom: '64px', // default: '32px'
      right: 'unset', // default: '32px'
      left: '32px', // default: 'unset'
      time: '1s', // default: '0.3s'
      mixColor: '#fff', // default: '#fff'
      backgroundColor: '#fff',  // default: '#fff'
      buttonColorDark: '#100f2c',  // default: '#100f2c'
      buttonColorLight: '#fff', // default: '#fff'
      saveInCookies: true, // default: true,
      label: 'ğŸŒ“', // default: ''
      autoMatchOsTheme: true // default: true
    }
    const darkmode = new Darkmode(options);
    darkmode.showWidget();
  }
  window.addEventListener('load', addDarkmodeWidget);
</script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
